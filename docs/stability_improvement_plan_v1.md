# Stability Score åˆ¤åˆ«åŠ›æå‡æ–¹æ¡ˆ v1

**åˆ›å»ºæ—¥æœŸ**: 2025-11-01  
**ç›®æ ‡**: æå‡Stability Scoreçš„AUCä»0.45â†’0.60+ï¼ŒF1ä»0.44â†’0.55+  
**å½“å‰ç‰ˆæœ¬**: DVP_v1.10_p50_w560_release

---

## 1. é—®é¢˜è¯Šæ–­

### 1.1 æ ¸å¿ƒé—®é¢˜

é€šè¿‡ç³»ç»Ÿè¯Šæ–­åˆ†æï¼ˆ`analyze_stability_issue.py`ï¼‰ï¼Œè¯†åˆ«å‡ºä»¥ä¸‹æ ¸å¿ƒé—®é¢˜ï¼š

| é—®é¢˜ç¼–å· | é—®é¢˜æè¿° | ä¸¥é‡æ€§ | å½“å‰çŠ¶æ€ |
|---------|---------|-------|----------|
| **é—®é¢˜1** | è®­ç»ƒæ ·æœ¬ä¸¥é‡ä¸è¶³ï¼šä»…ä½¿ç”¨200ä¸ªæ ·æœ¬ï¼ˆ0.75%å¯ç”¨æ•°æ®ï¼‰ | ğŸ”´ é«˜ | å®é™…æœ‰26666ä¸ªå¯ç”¨æ ·æœ¬æœªå……åˆ†åˆ©ç”¨ |
| **é—®é¢˜2** | Stability AUC=0.451ï¼Œæ¥è¿‘éšæœºçŒœæµ‹æ°´å¹³ | ğŸ”´ é«˜ | æ¨¡å‹å‡ ä¹æ²¡æœ‰åˆ¤åˆ«åŠ› |
| **é—®é¢˜3** | é˜ˆå€¼åˆ†ç¦»åº¦ä»…1.31Ïƒï¼Œè¿œä½äº3Ïƒæ ‡å‡† | ğŸŸ¡ ä¸­ | é˜ˆå€¼ä¸æ­£å¸¸åˆ†å¸ƒä¸¥é‡é‡å  |

### 1.2 å¯¹æ¯”åˆ†æ

| æŒ‡æ ‡ | Quality Score | Stability Score | å·®è· |
|-----|--------------|----------------|------|
| AUC | 0.9867 | 0.4506 | **0.536** |
| F1 | 0.9085 | 0.4413 | **0.467** |
| å¬å›ç‡ | 1.0000 | 0.3481 | **0.652** |
| ç²¾ç¡®ç‡ | 0.8323 | 0.6026 | 0.230 |

**ç»“è®º**: Quality Scoreè¡¨ç°ä¼˜ç§€ï¼Œè¯´æ˜æ•°æ®å’Œæ ‡ç­¾è´¨é‡è‰¯å¥½ï¼ŒStability Scoreçš„ä½æ€§èƒ½ä¸»è¦ç”±**è®­ç»ƒç­–ç•¥**è€Œéæ•°æ®æœ¬èº«å¯¼è‡´ã€‚

---

## 2. æ”¹è¿›æ–¹æ¡ˆ

### 2.1 ä¼˜å…ˆçº§æ’åº

| ä¼˜å…ˆçº§ | æ”¹è¿›æªæ–½ | é¢„æœŸæå‡ | å®æ–½éš¾åº¦ |
|-------|---------|---------|---------|
| **P0** | æ‰©å¤§è®­ç»ƒæ ·æœ¬ï¼š200â†’2000+ | AUC +0.10~0.15 | ä½ |
| **P0** | é™ä½edgeæ ·æœ¬å æ¯”ï¼š20%â†’10-15% | AUC +0.05~0.08 | ä½ |
| **P1** | ä¼˜åŒ–æƒé‡è®¾è®¡ï¼šè¯•éªŒvariance_smoothæ¨¡å¼ | AUC +0.02~0.05 | ä¸­ |
| **P1** | è°ƒæ•´é˜ˆå€¼æ–¹æ³•ï¼šP99.9â†’P99.5æˆ–MAD | F1 +0.05~0.08 | ä½ |
| **P2** | å¢åŠ AEæ­£åˆ™åŒ–ï¼šalpha=2e-4â†’3e-4 | é˜²æ­¢è¿‡æ‹Ÿåˆ | ä½ |
| **P3** | æ¶æ„å‡çº§ï¼šAEâ†’VAE | AUC +0.05~0.10 | é«˜ |

### 2.2 å…·ä½“å®æ–½æ­¥éª¤

#### æ­¥éª¤1ï¼šæ‰©å¤§è®­ç»ƒæ ·æœ¬ + ä¼˜åŒ–æ•°æ®ç­›é€‰ (P0)

**ç›®æ ‡**: è®­ç»ƒæ ·æœ¬ä»200å¢åŠ åˆ°2000+ï¼Œedgeå æ¯”ä»20%é™è‡³10-15%

**æ“ä½œå‘½ä»¤**:
```bash
# é‡æ–°ç­›é€‰è®­ç»ƒæ•°æ®ï¼ˆè°ƒæ•´åˆ†ä½æ•°é˜ˆå€¼å’Œedgeå æ¯”ï¼‰
python scripts/select_training_data.py \
    --input data/all_data.csv \
    --output-dir data/selection_v11 \
    --high-sim-pctl 80 \
    --high-pear-pctl 85 \
    --edge-sim-pctl 45 \
    --edge-pear-pctl 50 \
    --edge-max-ratio 0.15 \
    --split-train 0.70 \
    --split-val 0.15 \
    --split-test 0.15

# å¯¼å‡ºè®­ç»ƒå­é›†
python scripts/export_training_subset.py \
    --input data/all_data.csv \
    --index-dir data/selection_v11 \
    --output data/training_subset_v11.npz
```

**éªŒè¯ç‚¹**:
- è®­ç»ƒé›†æ ·æœ¬æ•°â‰¥2000
- edgeæ ·æœ¬å æ¯”â‰¤15%
- highæ ·æœ¬å æ¯”â‰¥80%

#### æ­¥éª¤2ï¼šè¯•éªŒä¸åŒæƒé‡æ¨¡å¼ (P1)

**ç›®æ ‡**: å¯¹æ¯”static vs variance_smoothæ¨¡å¼çš„æ€§èƒ½å·®å¼‚

**æ“ä½œå‘½ä»¤**:
```bash
# è®­ç»ƒvariance_smoothæ¨¡å¼æ¨¡å‹
python scripts/train.py \
    --coating DVP \
    --version v1.12_variance_smooth \
    --data-npz data/training_subset_v11.npz \
    --weights-mode variance_smooth \
    --alpha 0.0002

# è®­ç»ƒstaticæ¨¡å¼æ¨¡å‹ï¼ˆä½œä¸ºå¯¹ç…§ï¼‰
python scripts/train.py \
    --coating DVP \
    --version v1.12_static \
    --data-npz data/training_subset_v11.npz \
    --weights-mode static \
    --alpha 0.0002
```

#### æ­¥éª¤3ï¼šå¢åŠ æ­£åˆ™åŒ–å¼ºåº¦ (P2)

**ç›®æ ‡**: é˜²æ­¢è¿‡æ‹Ÿåˆï¼Œæé«˜æ³›åŒ–èƒ½åŠ›

**æ“ä½œå‘½ä»¤**:
```bash
# è®­ç»ƒæ›´é«˜æ­£åˆ™åŒ–çš„æ¨¡å‹
python scripts/train.py \
    --coating DVP \
    --version v1.13_alpha3e4 \
    --data-npz data/training_subset_v11.npz \
    --weights-mode variance_smooth \
    --alpha 0.0003
```

#### æ­¥éª¤4ï¼šè¯„ä¼°ä¸å¯¹æ¯” (å¿…é€‰)

**æ“ä½œå‘½ä»¤**:
```bash
# è¯„ä¼°v1.12_variance_smooth
python scripts/evaluate.py \
    --model-dir models/DVP/v1.12_variance_smooth \
    --output-dir evaluation/runs/v1.12_variance_smooth \
    --optimize-thresholds f1

# è¯„ä¼°v1.12_static
python scripts/evaluate.py \
    --model-dir models/DVP/v1.12_static \
    --output-dir evaluation/runs/v1.12_static \
    --optimize-thresholds f1

# è¯„ä¼°v1.13_alpha3e4
python scripts/evaluate.py \
    --model-dir models/DVP/v1.13_alpha3e4 \
    --output-dir evaluation/runs/v1.13_alpha3e4 \
    --optimize-thresholds f1
```

---

## 3. é¢„æœŸæ•ˆæœ

### 3.1 é‡åŒ–ç›®æ ‡

| æŒ‡æ ‡ | åŸºçº¿ï¼ˆv1.10ï¼‰ | ç›®æ ‡ï¼ˆv1.12+ï¼‰ | æå‡å¹…åº¦ |
|-----|-------------|---------------|---------|
| Stability AUC | 0.451 | **0.60+** | +0.15 |
| Stability F1 | 0.441 | **0.55+** | +0.11 |
| Stability å¬å›ç‡ | 0.348 | **0.50+** | +0.15 |
| Combined F1 | 0.926 | **â‰¥0.90** | ä¿æŒ |
| é˜ˆå€¼åˆ†ç¦»åº¦ | 1.31Ïƒ | **â‰¥2.5Ïƒ** | +1.2Ïƒ |

### 3.2 é‡Œç¨‹ç¢‘å®šä¹‰

| é‡Œç¨‹ç¢‘ | æ¡ä»¶ | çŠ¶æ€ |
|-------|------|------|
| **M1: å¯ç”¨** | Stability AUCâ‰¥0.55, Combined F1â‰¥0.90 | å¾…éªŒè¯ |
| **M2: è‰¯å¥½** | Stability AUCâ‰¥0.60, Combined F1â‰¥0.92 | å¾…éªŒè¯ |
| **M3: ä¼˜ç§€** | Stability AUCâ‰¥0.65, Combined F1â‰¥0.93 | å¾…éªŒè¯ |

---

## 4. é£é™©ä¸ç¼“è§£

### 4.1 æ½œåœ¨é£é™©

| é£é™© | æ¦‚ç‡ | å½±å“ | ç¼“è§£æªæ–½ |
|-----|------|------|---------|
| Combined F1ä¸‹é™ | ä¸­ | é«˜ | ä¿æŒedgeæ ·æœ¬â‰¥10%ï¼Œä¸è¦å®Œå…¨å‰”é™¤ |
| è®­ç»ƒæ—¶é—´è¿‡é•¿ | ä½ | ä¸­ | ä½¿ç”¨early_stoppingï¼Œé™åˆ¶max_iter |
| è¿‡æ‹Ÿåˆ | ä¸­ | ä¸­ | å¢åŠ æ­£åˆ™åŒ–alphaï¼Œç›‘æ§train/val losså·®è· |
| æ•°æ®åˆ†å¸ƒåç§» | ä½ | é«˜ | ä¿ç•™val/testé›†éªŒè¯æ³›åŒ–èƒ½åŠ› |

### 4.2 å›é€€ç­–ç•¥

å¦‚æœv1.12+ç‰ˆæœ¬çš„Combined F1<0.90ï¼Œåˆ™ï¼š
1. å›é€€åˆ°v1.10_p50_w560_releaseä½œä¸ºç”Ÿäº§ç‰ˆæœ¬
2. è°ƒæ•´edge_max_ratioä»15%â†’18%é‡æ–°è®­ç»ƒ
3. è€ƒè™‘ä½¿ç”¨æ®‹å·®åˆ†ç±»å™¨è¾…åŠ©é€šé“ï¼ˆ`--use-residual-clf`ï¼‰

---

## 5. æ‰§è¡Œè®¡åˆ’

### 5.1 æ—¶é—´çº¿

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é•¿ |
|-----|------|---------|
| **ç¬¬1å¤©** | æ•°æ®ç­›é€‰v11 + å¯¼å‡ºè®­ç»ƒé›† | 1å°æ—¶ |
| **ç¬¬2å¤©** | è®­ç»ƒv1.12 (static + variance_smooth) | 2å°æ—¶ |
| **ç¬¬3å¤©** | è®­ç»ƒv1.13 (alpha=3e-4) + è¯„ä¼°æ‰€æœ‰æ¨¡å‹ | 2å°æ—¶ |
| **ç¬¬4å¤©** | å¯¹æ¯”åˆ†æ + é€‰æ‹©æœ€ä¼˜ç‰ˆæœ¬ + å‘å¸ƒ | 1å°æ—¶ |

**æ€»é¢„è®¡æ—¶é•¿**: 6å°æ—¶

### 5.2 æˆåŠŸæ ‡å‡†

- âœ… Stability AUCâ‰¥0.60
- âœ… Stability F1â‰¥0.55
- âœ… Combined F1â‰¥0.90
- âœ… é˜ˆå€¼åˆ†ç¦»åº¦â‰¥2.5Ïƒ
- âœ… è¯„ä¼°æŠ¥å‘Šå®Œæ•´ï¼ˆROC/PR/é˜ˆå€¼æ•æ„Ÿæ€§/åˆ†å¸ƒå›¾ï¼‰

---

## 6. åç»­ä¼˜åŒ–æ–¹å‘

å¦‚æœv1.12+è¾¾åˆ°ç›®æ ‡ï¼ˆStability AUCâ‰¥0.60ï¼‰ï¼Œå¯è€ƒè™‘ï¼š

1. **åŠç›‘ç£å­¦ä¹ è·¯å¾„**: 
   - æ ‡æ³¨ç¬¬ä¸€æ‰¹æ ·æœ¬ï¼ˆæ­£å¸¸100+å¼‚å¸¸50ï¼‰
   - è®­ç»ƒæ®‹å·®åˆ†ç±»å™¨å¹¶èåˆ
   - ä¸»åŠ¨å­¦ä¹ è¿­ä»£æ ‡æ³¨

2. **æ¶æ„å‡çº§è·¯å¾„**:
   - å®ç°VAEï¼ˆVariational Autoencoderï¼‰
   - æ•è·æ½œåœ¨åˆ†å¸ƒï¼Œæå‡åˆ¤åˆ«åŠ›
   - éœ€é‡æ„ä»£ç ï¼ˆPyTorch/TensorFlowï¼‰

3. **å¥åº·åº¦ç›‘æ§éƒ¨ç½²**:
   - å›ºåŒ–health_monitorå‚æ•°
   - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²CHSç›‘æ§
   - è¶‹åŠ¿å‘Šè­¦ä¸å¯è§†åŒ–

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å¾…æ‰§è¡Œ  
**è´Ÿè´£äºº**: AI Agent  
**å®¡æ ¸äºº**: ç”¨æˆ·  
**æ›´æ–°æ—¥æœŸ**: 2025-11-01

